"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[17967],{15680:(e,t,a)=>{a.d(t,{xA:()=>c,yg:()=>g});var n=a(96540);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(a),m=o,g=d["".concat(p,".").concat(m)]||d[m]||y[m]||r;return a?n.createElement(g,i(i({ref:t},c),{},{components:a})):n.createElement(g,i({ref:t},c))}));function g(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},44558:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>f,contentTitle:()=>u,default:()=>F,frontMatter:()=>g,metadata:()=>h,toc:()=>v});var n=a(15680),o=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(e,t,a)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&c(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&c(e,a,t[a]);return e},y=(e,t)=>r(e,i(t)),m=(e,t)=>{var a={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&s.call(e,n)&&(a[n]=e[n]);return a};const g={},u="save_email",h={unversionedId:"tql2/operators/save_email",id:"tql2/operators/save_email",title:"save_email",description:"Saves bytes through an SMTP server.",source:"@site/docs/tql2/operators/save_email.md",sourceDirName:"tql2/operators",slug:"/tql2/operators/save_email",permalink:"/next/tql2/operators/save_email",draft:!1,editUrl:"https://github.com/tenzir/tenzir/tree/main/web/docs/tql2/operators/save_email.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"save",permalink:"/next/tql2/operators/save"},next:{title:"save_file",permalink:"/next/tql2/operators/save_file"}},f={},v=[{value:"Description",id:"description",level:2},{value:"<code>recipient: str</code>",id:"recipient-str",level:3},{value:"<code>endpoint = str (optional)</code>",id:"endpoint--str-optional",level:3},{value:"<code>from = str (optional)</code>",id:"from--str-optional",level:3},{value:"<code>subject = str (optional)</code>",id:"subject--str-optional",level:3},{value:"<code>username = str (optional)</code>",id:"username--str-optional",level:3},{value:"<code>password = str (optional)</code>",id:"password--str-optional",level:3},{value:"<code>authzid = str (optional)</code>",id:"authzid--str-optional",level:3},{value:"<code>authorization = str (optional)</code>",id:"authorization--str-optional",level:3},{value:"<code>skip_peer_verification = bool (optional)</code>",id:"skip_peer_verification--bool-optional",level:3},{value:"<code>skip_hostname_verification = bool (optional)</code>",id:"skip_hostname_verification--bool-optional",level:3},{value:"<code>mime = bool (optional)</code>",id:"mime--bool-optional",level:3},{value:"<code>verbose = bool (optional)</code>",id:"verbose--bool-optional",level:3},{value:"Examples",id:"examples",level:2}],b={toc:v},N="wrapper";function F(e){var t=e,{components:a}=t,o=m(t,["components"]);return(0,n.yg)(N,y(d(d({},b),o),{components:a,mdxType:"MDXLayout"}),(0,n.yg)("h1",d({},{id:"save_email"}),"save_email"),(0,n.yg)("p",null,"Saves bytes through an SMTP server."),(0,n.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,n.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,n.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"save_email"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}})," recipient"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),":"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str, [endpoint"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),":"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str, from"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str, subject"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str, username"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str,")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"      password"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str, authzid"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str, authorization"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"str,")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"      skip_peer_verification"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"bool, skip_hostname_verification"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"bool,")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"      mime"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"bool, verbose"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"bool]"))))),(0,n.yg)("h2",d({},{id:"description"}),"Description"),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"save_email")," operator establishes a SMTP(S) connection to a mail server and sends\nbytes as email body."),(0,n.yg)("h3",d({},{id:"recipient-str"}),(0,n.yg)("inlineCode",{parentName:"h3"},"recipient: str")),(0,n.yg)("p",null,"The recipient of the mail."),(0,n.yg)("p",null,"The expected format is either ",(0,n.yg)("inlineCode",{parentName:"p"},"Name <user@example.org>")," with the email in angle\nbrackets, or a plain email adress, such as ",(0,n.yg)("inlineCode",{parentName:"p"},"user@example.org"),"."),(0,n.yg)("h3",d({},{id:"endpoint--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"endpoint = str (optional)")),(0,n.yg)("p",null,"The endpoint of the mail server."),(0,n.yg)("p",null,"To choose between SMTP and SMTPS, provide a URL with with the corresponding\nscheme. For example, ",(0,n.yg)("inlineCode",{parentName:"p"},"smtp://127.0.0.1:25")," will establish an unencrypted\nconnection, whereas ",(0,n.yg)("inlineCode",{parentName:"p"},"smtps://127.0.0.1:25")," an encrypted one. If you specify a\nserver without a schema, the protocol defaults to SMTPS."),(0,n.yg)("p",null,"Defaults to ",(0,n.yg)("inlineCode",{parentName:"p"},"smtp://localhost:25"),"."),(0,n.yg)("h3",d({},{id:"from--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"from = str (optional)")),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"From")," header."),(0,n.yg)("p",null,"If you do not specify this parameter, an empty address is sent to the SMTP\nserver which might cause the email to be rejected."),(0,n.yg)("h3",d({},{id:"subject--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"subject = str (optional)")),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"Subject")," header."),(0,n.yg)("h3",d({},{id:"username--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"username = str (optional)")),(0,n.yg)("p",null,"The username in an authenticated SMTP connection."),(0,n.yg)("h3",d({},{id:"password--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"password = str (optional)")),(0,n.yg)("p",null,"The password in an authenticated SMTP connection."),(0,n.yg)("h3",d({},{id:"authzid--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"authzid = str (optional)")),(0,n.yg)("p",null,"The authorization identity in an authenticated SMTP connection."),(0,n.yg)("p",null,"This option is only applicable to the PLAIN SASL authentication mechanism where\nit is optional. When not specified only the authentication identity (",(0,n.yg)("inlineCode",{parentName:"p"},"authcid"),")\nas specified by the username is sent to the server, along with the password. The\nserver derives an ",(0,n.yg)("inlineCode",{parentName:"p"},"authzid")," from the ",(0,n.yg)("inlineCode",{parentName:"p"},"authcid")," when not provided, which it then\nuses internally. When the ",(0,n.yg)("inlineCode",{parentName:"p"},"authzid")," is specified it can be used to access\nanother user's inbox, that the user has been granted access to, or a shared\nmailbox."),(0,n.yg)("h3",d({},{id:"authorization--str-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"authorization = str (optional)")),(0,n.yg)("p",null,"The authorization options for an authenticated SMTP connection."),(0,n.yg)("p",null,"This login option defines the preferred authentication mechanism, e.g.,\n",(0,n.yg)("inlineCode",{parentName:"p"},"AUTH=PLAIN"),", ",(0,n.yg)("inlineCode",{parentName:"p"},"AUTH=LOGIN"),", or ",(0,n.yg)("inlineCode",{parentName:"p"},"AUTH=*"),"."),(0,n.yg)("h3",d({},{id:"skip_peer_verification--bool-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"skip_peer_verification = bool (optional)")),(0,n.yg)("p",null,"If to skip certificate verification."),(0,n.yg)("p",null,"By default, an SMTPS connection verifies the authenticity of the peer's\ncertificate. During connection negotiation, the server sends a certificate\nindicating its identity. We verify whether the certificate is authentic,\ni.e., that you can trust that the server is who the certificate says it is."),(0,n.yg)("p",null,"If ",(0,n.yg)("inlineCode",{parentName:"p"},"true"),", disables loading of the CA certificates and verification of\nthe peer certificate."),(0,n.yg)("h3",d({},{id:"skip_hostname_verification--bool-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"skip_hostname_verification = bool (optional)")),(0,n.yg)("p",null,"If to ignore verification of the server name in the certificate."),(0,n.yg)("p",null,"When negotiating TLS and SSL connections, the server sends a certificate\nindicating its identity. By default, that certificate must indicate that the\nserver is the server to which you meant to connect, or the connection fails.\nThat is, the server has to have the same name in the certificate as is in the\nURL you operate against. We consider the server the intended one when the\n",(0,n.yg)("em",{parentName:"p"},"Common Name")," field or a ",(0,n.yg)("em",{parentName:"p"},"Subject Alternate Name")," field in the certificate\nmatches the hostname in the URL."),(0,n.yg)("p",null,"Setting this to ",(0,n.yg)("inlineCode",{parentName:"p"},"true")," skips this check, but it makes the connection insecure."),(0,n.yg)("p",null,"Defaults to ",(0,n.yg)("inlineCode",{parentName:"p"},"false"),"."),(0,n.yg)("h3",d({},{id:"mime--bool-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"mime = bool (optional)")),(0,n.yg)("p",null,"If to wrap the chunk into a MIME part."),(0,n.yg)("p",null,"The operator uses the metadata of the byte chunk for the\n",(0,n.yg)("inlineCode",{parentName:"p"},"Content-Type")," MIME header."),(0,n.yg)("p",null,"Defaults to ",(0,n.yg)("inlineCode",{parentName:"p"},"false"),"."),(0,n.yg)("h3",d({},{id:"verbose--bool-optional"}),(0,n.yg)("inlineCode",{parentName:"h3"},"verbose = bool (optional)")),(0,n.yg)("p",null,"Enables verbose output on stderr."),(0,n.yg)("p",null,"This option is helpful for debugging on the command line."),(0,n.yg)("p",null,"Defaults to ",(0,n.yg)("inlineCode",{parentName:"p"},"false"),"."),(0,n.yg)("h2",d({},{id:"examples"}),"Examples"),(0,n.yg)("p",null,"Send the Tenzir version string as CSV to ",(0,n.yg)("inlineCode",{parentName:"p"},"user@example.org"),":"),(0,n.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,n.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,n.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"version")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"write_csv")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"save_email"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),' "user@example.org"'))))),(0,n.yg)("p",null,"Send the email body as MIME part:"),(0,n.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,n.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,n.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"version")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"write_json")),"\n",(0,n.yg)("span",d({parentName:"code"},{"data-line":""}),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"save_email"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),' "user@example.org"'),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),", mime"),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,n.yg)("span",d({parentName:"span"},{style:{color:"#79C0FF"}}),"true"))))),(0,n.yg)("p",null,"This may result in the following email body:"),(0,n.yg)("pre",null,(0,n.yg)("code",d({parentName:"pre"},{}),'--------------------------s89ecto6c12ILX7893YOEf\nContent-Type: application/json\nContent-Transfer-Encoding: quoted-printable\n\n{\n  "version": "4.10.4+ge0a060567b-dirty",\n  "build": "ge0a060567b-dirty",\n  "major": 4,\n  "minor": 10,\n  "patch": 4\n}\n\n--------------------------s89ecto6c12ILX7893YOEf--\n')))}F.isMDXComponent=!0}}]);