"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[12442],{15680:(e,a,n)=>{n.d(a,{xA:()=>m,yg:()=>d});var t=n(96540);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function p(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?p(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},p=Object.keys(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=t.createContext({}),i=function(e){var a=t.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):s(s({},a),e)),n},m=function(e){var a=i(e.components);return t.createElement(l.Provider,{value:a},e.children)},y="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},g=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,p=e.originalType,l=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),y=i(n),g=r,d=y["".concat(l,".").concat(g)]||y[g]||c[g]||p;return n?t.createElement(d,s(s({ref:a},m),{},{components:n})):t.createElement(d,s({ref:a},m))}));function d(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var p=n.length,s=new Array(p);s[0]=g;var o={};for(var l in a)hasOwnProperty.call(a,l)&&(o[l]=a[l]);o.originalType=e,o[y]="string"==typeof e?e:r,s[1]=o;for(var i=2;i<p;i++)s[i]=n[i];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}g.displayName="MDXCreateElement"},56123:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>h,contentTitle:()=>u,default:()=>b,frontMatter:()=>d,metadata:()=>f,toc:()=>N});var t=n(15680),r=Object.defineProperty,p=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,m=(e,a,n)=>a in e?r(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,y=(e,a)=>{for(var n in a||(a={}))l.call(a,n)&&m(e,n,a[n]);if(o)for(var n of o(a))i.call(a,n)&&m(e,n,a[n]);return e},c=(e,a)=>p(e,s(a)),g=(e,a)=>{var n={};for(var t in e)l.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&o)for(var t of o(e))a.indexOf(t)<0&&i.call(e,t)&&(n[t]=e[t]);return n};const d={title:"VAST v2.2",description:"Pipelines",authors:"lava",date:new Date("2022-08-05T00:00:00.000Z"),tags:["release","summarize","pipelines"]},u=void 0,f={permalink:"/blog/vast-v2.2",source:"@site/blog/vast-v2.2/index.md",title:"VAST v2.2",description:"Pipelines",date:"2022-08-05T00:00:00.000Z",formattedDate:"August 5, 2022",tags:[{label:"release",permalink:"/blog/tags/release"},{label:"summarize",permalink:"/blog/tags/summarize"},{label:"pipelines",permalink:"/blog/tags/pipelines"}],readingTime:2.135,hasTruncateMarker:!0,authors:[{name:"Benno Evers",title:"Principal Engineer",url:"https://github.com/lava",email:"benno@tenzir.com",imageURL:"https://github.com/lava.png",key:"lava"}],frontMatter:{title:"VAST v2.2",description:"Pipelines",authors:"lava",date:"2022-08-05T00:00:00.000Z",tags:["release","summarize","pipelines"]},prevItem:{title:"Richer Typing in Sigma",permalink:"/blog/richer-typing-in-sigma"},nextItem:{title:"VAST v2.1",permalink:"/blog/vast-v2.1"}},h={authorsImageUrls:[void 0]},N=[{value:"Transforms are now Pipelines",id:"transforms-are-now-pipelines",level:2},{value:"Summarization Improvements",id:"summarization-improvements",level:2}],E={toc:N},v="wrapper";function b(e){var a=e,{components:n}=a,r=g(a,["components"]);return(0,t.yg)(v,c(y(y({},E),r),{components:n,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"We released ",(0,t.yg)("a",y({parentName:"p"},{href:"https://github.com/tenzir/vast/releases/tag/v2.2.0"}),"VAST v2.2")," \ud83d\ude4c! Transforms now have a new name:\n",(0,t.yg)("a",y({parentName:"p"},{href:"/blog/vast-v2.2#transforms-are-now-pipelines"}),"pipelines"),". The ",(0,t.yg)("a",y({parentName:"p"},{href:"/blog/vast-v2.2#summarization-improvements"}),"summarize\noperator")," also underwent a facelift,\nmaking aggregation functions pluggable and allowing for assigning names to\noutput fields."),(0,t.yg)("h2",y({},{id:"transforms-are-now-pipelines"}),"Transforms are now Pipelines"),(0,t.yg)("p",null,"After carefully reconsidering our naming decisions related to query execution\nand data transformation, we came up with a naming convention that does a better\njob in capturing the underlying concepts."),(0,t.yg)("p",null,"Most notably, we renamed ",(0,t.yg)("em",{parentName:"p"},"transforms")," to ",(0,t.yg)("em",{parentName:"p"},"pipelines"),". A transform ",(0,t.yg)("em",{parentName:"p"},"step")," is now a\npipeline ",(0,t.yg)("em",{parentName:"p"},"operator"),". This nomenclature is much more familiar to users coming\nfrom dataflow and collection-based query engines. The implementation underneath\nhasn't changed. As in the ",(0,t.yg)("a",y({parentName:"p"},{href:"https://paperhub.s3.amazonaws.com/dace52a42c07f7f8348b08dc2b186061.pdf"}),"Volcano model"),", data still flows through\noperators, each of which consumes input from upstream operators and produces\noutput for downstream operators. What we term a pipeline is the sequence of such\nchained operators."),(0,t.yg)("p",null,"While pipelines are not yet available at the query layer, they soon will be.\nUntil then, you can deploy pipelines at load-time to transform data in motion\nor data at rest."),(0,t.yg)("p",null,"From a user perspective, the configuration keys associated with transforms have\nchanged. Here's the updated example from our previous ",(0,t.yg)("a",y({parentName:"p"},{href:"/blog/vast-v1.0"}),"VAST v1.0 release\nblog"),"."),(0,t.yg)("figure",y({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",y({parentName:"figure"},{tabIndex:0,"data-language":"yaml","data-theme":"github-dark-default"}),(0,t.yg)("code",y({parentName:"pre"},{"data-language":"yaml","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"vast"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"  # Specify and name our pipelines, each of which are a list of configured")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"  # pipeline operators. Pipeline operators are plugins, enabling users to ")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"  # write complex transformations in native code using C++ and Apache Arrow.")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"  pipelines"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"     # Prevent events with certain strings to be exported, e.g., ")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),'     # "tenzir" or "secret-username".')),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"     remove-events-with-secrets"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"       - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"select"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"           expression"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),": "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),'\':string !in ["tenzir", "secret-username"]\'')),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""})," "),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"  # Specify whether to trigger each pipeline at server- or client-side, on")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"  # `import` or `export`, and restrict them to a list of event types.")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"  pipeline-triggers"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"    export"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"      # Apply the remove-events-with-secrets transformation server-side on")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"      # export to the suricata.dns and suricata.http event types.")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"      - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"pipeline"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),": "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),"remove-events-with-secrets")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"        location"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),": "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),"server")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"        events"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"          - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),"suricata.dns")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"          - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),"suricata.http"))))),(0,t.yg)("h2",y({},{id:"summarization-improvements"}),"Summarization Improvements"),(0,t.yg)("p",null,"In line with the above nomenclature changes, we've improved the behavior of the\n",(0,t.yg)("inlineCode",{parentName:"p"},"summarize")," operator. It is now possible to specify an explicit\nname for the output fields. This is helpful when the downstream processing needs\na predictable schema. Previously, VAST took simply the name of the input field.\nThe syntax was as follows:"),(0,t.yg)("figure",y({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",y({parentName:"figure"},{tabIndex:0,"data-language":"yaml","data-theme":"github-dark-default"}),(0,t.yg)("code",y({parentName:"pre"},{"data-language":"yaml","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"summarize"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"  group-by"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"    - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#79C0FF"}}),"...")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"  aggregate"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"    min"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"      - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),"ts"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}})," # implied name for aggregate field"))))),(0,t.yg)("p",null,"We now switched the syntax such that the new field name is at the beginning:"),(0,t.yg)("figure",y({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",y({parentName:"figure"},{tabIndex:0,"data-language":"yaml","data-theme":"github-dark-default"}),(0,t.yg)("code",y({parentName:"pre"},{"data-language":"yaml","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"summarize"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"  group-by"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),"    - "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#79C0FF"}}),"...")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"  aggregate"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"    ts_min"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),": "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#8B949E"}}),"# explicit name for aggregate field")),"\n",(0,t.yg)("span",y({parentName:"code"},{"data-line":""}),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#7EE787"}}),"      min"),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#E6EDF3"}}),": "),(0,t.yg)("span",y({parentName:"span"},{style:{color:"#A5D6FF"}}),"ts"))))),(0,t.yg)("p",null,"In SQL, this would be the ",(0,t.yg)("inlineCode",{parentName:"p"},"AS")," token: ",(0,t.yg)("inlineCode",{parentName:"p"},"SELECT min(ts) AS min_ts"),"."))}b.isMDXComponent=!0}}]);