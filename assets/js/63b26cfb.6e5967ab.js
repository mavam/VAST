"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3867],{15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>u});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),s=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},g=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,g=p(e,["components","mdxType","originalType","parentName"]),c=s(a),y=r,u=c["".concat(l,".").concat(y)]||c[y]||d[y]||o;return a?n.createElement(u,i(i({ref:t},g),{},{components:a})):n.createElement(u,i({ref:t},g))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=y;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[c]="string"==typeof e?e:r,i[1]=p;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}y.displayName="MDXCreateElement"},29595:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>b,contentTitle:()=>m,default:()=>v,frontMatter:()=>u,metadata:()=>h,toc:()=>f});var n=a(15680),r=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&g(e,a,t[a]);if(p)for(var a of p(t))s.call(t,a)&&g(e,a,t[a]);return e},d=(e,t)=>o(e,i(t)),y=(e,t)=>{var a={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&s.call(e,n)&&(a[n]=e[n]);return a};const u={},m="Graylog",h={unversionedId:"integrations/graylog",id:"version-v4.24/integrations/graylog",title:"Graylog",description:"Graylog is a log management solution based on top of",source:"@site/versioned_docs/version-v4.24/integrations/graylog.md",sourceDirName:"integrations",slug:"/integrations/graylog",permalink:"/v4.24/integrations/graylog",draft:!1,editUrl:"https://github.com/tenzir/tenzir/tree/main/web/versioned_docs/version-v4.24/integrations/graylog.md",tags:[],version:"v4.24",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Azure Log Analytics",permalink:"/v4.24/integrations/azure-log-analytics/"},next:{title:"Splunk",permalink:"/v4.24/integrations/splunk"}},b={},f=[{value:"Receive data from Graylog",id:"receive-data-from-graylog",level:2},{value:"Configure a GELF TCP output",id:"configure-a-gelf-tcp-output",level:3},{value:"Create a Graylog stream",id:"create-a-graylog-stream",level:3},{value:"Test the connection with a Tenzir pipeline",id:"test-the-connection-with-a-tenzir-pipeline",level:3}],I={toc:f},N="wrapper";function v(e){var t=e,{components:a}=t,r=y(t,["components"]);return(0,n.yg)(N,d(c(c({},I),r),{components:a,mdxType:"MDXLayout"}),(0,n.yg)("h1",c({},{id:"graylog"}),"Graylog"),(0,n.yg)("p",null,(0,n.yg)("a",c({parentName:"p"},{href:"https://graylog.org/"}),"Graylog")," is a log management solution based on top of\nElasticsearch."),(0,n.yg)("p",null,"Use Tenzir to process data from Graylog."),(0,n.yg)("p",null,"In Graylog, data goes through three key stages:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Inputs"),": This stage involves data ingestion, where Graylog receives data\nfrom various sources. Inputs support multiple protocols like TCP, UDP, and\nHTTP. They normalize incoming data into the unified ",(0,n.yg)("a",c({parentName:"li"},{href:"/v4.24/formats/gelf"}),"Graylog Extended Log\nFormat (GELF)"),"."),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Streams"),": Once onboarded, streams route the data internally. Here,\nit can be filtered, parsed, and enriched. The stream processing stage\nleverages extractors and pipeline rules for data manipulation, before\nindexing the data in Elasticsearch for storage."),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Outputs"),": For exporting data, Graylog utilizes alerts, dashboards, and its\nREST API. Additionally, Graylog can forward data to external systems or tools\nvia streams.")),(0,n.yg)("h2",c({},{id:"receive-data-from-graylog"}),"Receive data from Graylog"),(0,n.yg)("p",null,"To receive data from Graylog with a Tenzir pipeline, you need to configure a new\noutput and setup a stream that sends data to that output. The example below\nassumes that Graylog sends data in GELF to a TCP endpoint that listens on\n1.2.3.4 at port 5678."),(0,n.yg)("h3",c({},{id:"configure-a-gelf-tcp-output"}),"Configure a GELF TCP output"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Navigate to ",(0,n.yg)("em",{parentName:"li"},"System/Outputs")," in Graylog's web interface."),(0,n.yg)("li",{parentName:"ol"},"Click ",(0,n.yg)("em",{parentName:"li"},"Manage Outputs"),"."),(0,n.yg)("li",{parentName:"ol"},"Select ",(0,n.yg)("inlineCode",{parentName:"li"},"GELF TCP")," as the output type."),(0,n.yg)("li",{parentName:"ol"},"Configure the output settings:",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Specify the target server's address in the ",(0,n.yg)("inlineCode",{parentName:"li"},"host")," field (e.g., 1.2.3.4)."),(0,n.yg)("li",{parentName:"ul"},"Enter the port number for the TCP connection (e.g., 5678)."),(0,n.yg)("li",{parentName:"ul"},"Optionally adjust other settings like reconnect delay, queue size, and send\nbuffer size."))),(0,n.yg)("li",{parentName:"ol"},"Save the configuration.")),(0,n.yg)("p",null,"Now Graylog will forward messages in GELF format to the specified TCP endpoint."),(0,n.yg)("h3",c({},{id:"create-a-graylog-stream"}),"Create a Graylog stream"),(0,n.yg)("p",null,"The newly created output still needs to be connected to a stream to produce\ndata. For example, to route all incoming traffic in Graylog to an output:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Go to ",(0,n.yg)("em",{parentName:"li"},"Streams")," in the Graylog web interface."),(0,n.yg)("li",{parentName:"ol"},"Create a new stream or edit an existing one."),(0,n.yg)("li",{parentName:"ol"},"In the stream's settings, configure it to match all incoming messages. You\ncan do this by setting up a rule that matches all messages or by leaving the\nrules empty."),(0,n.yg)("li",{parentName:"ol"},"Once the stream is configured, go to the ",(0,n.yg)("em",{parentName:"li"},"Outputs")," tab in the stream's\nsettings."),(0,n.yg)("li",{parentName:"ol"},"Add the previously configured GELF TCP output to this stream.")),(0,n.yg)("p",null,"This setup will direct all messages that arrive in Graylog to the specified\noutput. Adapt your filters for more fine-grained forwarding."),(0,n.yg)("h3",c({},{id:"test-the-connection-with-a-tenzir-pipeline"}),"Test the connection with a Tenzir pipeline"),(0,n.yg)("p",null,"Now that Graylog is configured, you can test that data is flowing using the\nfollowing Tenzir pipeline:"),(0,n.yg)("figure",c({},{"data-rehype-pretty-code-figure":""}),(0,n.yg)("pre",c({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,n.yg)("code",c({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#D2A8FF"}}),"load_tcp"),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#A5D6FF"}}),' "1.2.3.4:5678"'),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#E6EDF3"}})," {")),"\n",(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#D2A8FF"}}),"  read_gelf")),"\n",(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#E6EDF3"}}),"}"))),(0,n.yg)("button",c({parentName:"pre"},{type:"button",data:'load_tcp "1.2.3.4:5678" {\n  read_gelf\n}',title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,n.yg)("span",c({parentName:"button"},{className:"ready"})),(0,n.yg)("span",c({parentName:"button"},{className:"success"}))),(0,n.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,n.yg)("p",null,"This pipelines opens a listening socket at IP address 1.2.3.4 at port 5678 via\n",(0,n.yg)("a",c({parentName:"p"},{href:"/v4.24/tql2/operators/load_tcp"}),(0,n.yg)("inlineCode",{parentName:"a"},"load_tcp")),", and then spawns a nested pipeline\nper accepted connection, each of which reads a stream of GELF messages using\n",(0,n.yg)("a",c({parentName:"p"},{href:"/v4.24/tql2/operators/read_gelf"}),(0,n.yg)("inlineCode",{parentName:"a"},"read_gelf")),". Graylog will connect to this\nsocket, based on the reconnect interval that you configured in the output (by\ndefault 500ms)."),(0,n.yg)("p",null,"Now that data is flowing, you can decide what to do with the Graylog data, e.g.,\ningest data into a running Tenzir node by appending\n",(0,n.yg)("a",c({parentName:"p"},{href:"/v4.24/tql2/operators/import"}),(0,n.yg)("inlineCode",{parentName:"a"},"import")),":"),(0,n.yg)("figure",c({},{"data-rehype-pretty-code-figure":""}),(0,n.yg)("pre",c({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,n.yg)("code",c({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#D2A8FF"}}),"load_tcp"),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#A5D6FF"}}),' "1.2.3.4:5678"'),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#E6EDF3"}})," {")),"\n",(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#D2A8FF"}}),"  read_gelf")),"\n",(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#E6EDF3"}}),"}")),"\n",(0,n.yg)("span",c({parentName:"code"},{"data-line":""}),(0,n.yg)("span",c({parentName:"span"},{style:{color:"#D2A8FF"}}),"import"))),(0,n.yg)("button",c({parentName:"pre"},{type:"button",data:'load_tcp "1.2.3.4:5678" {\n  read_gelf\n}\nimport',title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,n.yg)("span",c({parentName:"button"},{className:"ready"})),(0,n.yg)("span",c({parentName:"button"},{className:"success"}))),(0,n.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))))}v.isMDXComponent=!0}}]);