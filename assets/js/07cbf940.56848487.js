"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[15944],{15680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>d});var r=t(96540);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=r.createContext({}),s=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=s(e.components);return r.createElement(p.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},y=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(t),y=o,d=m["".concat(p,".").concat(y)]||m[y]||u[y]||a;return t?r.createElement(d,i(i({ref:n},c),{},{components:t})):r.createElement(d,i({ref:n},c))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=y;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[m]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=t[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}y.displayName="MDXCreateElement"},50449:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>g,default:()=>j,frontMatter:()=>d,metadata:()=>f,toc:()=>b});var r=t(15680),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(e,n,t)=>n in e?o(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,m=(e,n)=>{for(var t in n||(n={}))p.call(n,t)&&c(e,t,n[t]);if(l)for(var t of l(n))s.call(n,t)&&c(e,t,n[t]);return e},u=(e,n)=>a(e,i(n)),y=(e,n)=>{var t={};for(var r in e)p.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&l)for(var r of l(e))n.indexOf(r)<0&&s.call(e,r)&&(t[r]=e[r]);return t};const d={sidebar_custom_props:{format:{parser:!0,printer:!0}}},g="json",f={unversionedId:"formats/json",id:"formats/json",title:"json",description:"Reads and writes JSON.",source:"@site/docs/formats/json.md",sourceDirName:"formats",slug:"/formats/json",permalink:"/next/formats/json",draft:!1,editUrl:"https://github.com/tenzir/tenzir/tree/main/web/docs/formats/json.md",tags:[],version:"current",frontMatter:{sidebar_custom_props:{format:{parser:!0,printer:!0}}},sidebar:"docsSidebar",previous:{title:"grok",permalink:"/next/formats/grok"},next:{title:"kv",permalink:"/next/formats/kv"}},h={},b=[{value:"Synopsis",id:"synopsis",level:2},{value:"Description",id:"description",level:2},{value:"Common Options (Parser)",id:"common-options-parser",level:3},{value:"<code>--ndjson</code> (Parser)",id:"--ndjson-parser",level:3},{value:"<code>--precise</code> (Parser)",id:"--precise-parser",level:3},{value:"<code>--no-infer</code> (Parser)",id:"--no-infer-parser",level:3},{value:"<code>--arrays-of-objects</code> (Parser)",id:"--arrays-of-objects-parser",level:3},{value:"<code>--c|--compact-output</code> (Printer)",id:"--c--compact-output-printer",level:3},{value:"<code>--C|--color-output</code> (Printer)",id:"--c--color-output-printer",level:3},{value:"<code>--M|--monochrome-output</code> (Printer)",id:"--m--monochrome-output-printer",level:3},{value:"<code>--omit-nulls</code> (Printer)",id:"--omit-nulls-printer",level:3},{value:"<code>--omit-empty-objects</code> (Printer)",id:"--omit-empty-objects-printer",level:3},{value:"<code>--omit-empty-lists</code> (Printer)",id:"--omit-empty-lists-printer",level:3},{value:"<code>--omit-empty</code> (Printer)",id:"--omit-empty-printer",level:3},{value:"<code>--arrays-of-objects</code> (Printer)",id:"--arrays-of-objects-printer",level:3},{value:"Examples",id:"examples",level:2}],N={toc:b},v="wrapper";function j(e){var n=e,{components:t}=n,o=y(n,["components"]);return(0,r.yg)(v,u(m(m({},N),o),{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",m({},{id:"json"}),"json"),(0,r.yg)("p",null,"Reads and writes JSON."),(0,r.yg)("h2",m({},{id:"synopsis"}),"Synopsis"),(0,r.yg)("p",null,"Parser:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),"json [--merge] [--schema <schema>] [--selector <fieldname[:prefix]>]\n     [--schema-only] [--raw] [--unnest-separator <separator>]\n     [--ndjson] [--arrays-of-objects] [--precise] [--no-infer]\n")),(0,r.yg)("p",null,"Printer:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),"json [-c|--compact-output] [-C|--color-output] [-M|--monochrome-output]\n     [--omit-nulls] [--omit-empty-objects] [--omit-empty-lists] [--omit-empty]\n     [--arrays-of-objects]\n")),(0,r.yg)("h2",m({},{id:"description"}),"Description"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"json")," format provides a parser and printer for JSON and ",(0,r.yg)("a",m({parentName:"p"},{href:"https://en.wikipedia.org/wiki/JSON_streaming#Line-delimited_JSON"}),"line-delimited\nJSON")," objects."),(0,r.yg)("h3",m({},{id:"common-options-parser"}),"Common Options (Parser)"),(0,r.yg)("p",null,"The JSON parser supports the common ",(0,r.yg)("a",m({parentName:"p"},{href:"/next/formats#parser-schema-inference"}),"schema inference options"),"."),(0,r.yg)("h3",m({},{id:"--ndjson-parser"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--ndjson")," (Parser)"),(0,r.yg)("p",null,"Treat the input as newline-delimited JSON (NDJSON)."),(0,r.yg)("p",null,"NDJSON requires that exactly one event exists per line. This allows for better\nerror recovery in cases of malformed input, as unlike for the regular JSON\nparser malformed lines can be skipped."),(0,r.yg)("p",null,"Popular examples of NDJSON include the Suricata Eve JSON and the Zeek Streaming\nJSON formats. Tenzir supports ",(0,r.yg)("a",m({parentName:"p"},{href:"/next/formats/suricata"}),(0,r.yg)("inlineCode",{parentName:"a"},"suricata"))," and\n",(0,r.yg)("a",m({parentName:"p"},{href:"/next/formats/zeek-json"}),(0,r.yg)("inlineCode",{parentName:"a"},"zeek-json"))," parsers out of the box that utilize this mechanism."),(0,r.yg)("h3",m({},{id:"--precise-parser"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--precise")," (Parser)"),(0,r.yg)("p",null,"Legacy flag. Has the same effect as ",(0,r.yg)("em",{parentName:"p"},"not")," providing ",(0,r.yg)("inlineCode",{parentName:"p"},"--merge"),". This option is incompatible with  ",(0,r.yg)("inlineCode",{parentName:"p"},"--merge"),"."),(0,r.yg)("h3",m({},{id:"--no-infer-parser"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--no-infer")," (Parser)"),(0,r.yg)("p",null,"Legacy flag. It is equivalent to the new flag ",(0,r.yg)("inlineCode",{parentName:"p"},"--schema-only"),"."),(0,r.yg)("h3",m({},{id:"--arrays-of-objects-parser"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--arrays-of-objects")," (Parser)"),(0,r.yg)("p",null,"Parse arrays of objects, with every object in the outermost arrays resulting in\none event each. This is particularly useful when interfacing with REST APIs,\nwhich often yield large arrays of objects instead of newline-delimited JSON\nobjects."),(0,r.yg)("h3",m({},{id:"--c--compact-output-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--c|--compact-output")," (Printer)"),(0,r.yg)("p",null,"Switch to line-delimited JSON output (JSONL/NDJSON)."),(0,r.yg)("h3",m({},{id:"--c--color-output-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--C|--color-output")," (Printer)"),(0,r.yg)("p",null,"Colorize the output."),(0,r.yg)("p",null,"The option enables colorizing the output similar to ",(0,r.yg)("inlineCode",{parentName:"p"},"jq")," by emitting terminal\nescape sequences that represent colors."),(0,r.yg)("p",null,"Unlike ",(0,r.yg)("inlineCode",{parentName:"p"},"jq"),", coloring is currently opt-in. In the future, we will perform TTY\ndetection and colorize the output when write to stdout."),(0,r.yg)("p",null,"Tenzir honors the ",(0,r.yg)("a",m({parentName:"p"},{href:"https://no-color.org/"}),(0,r.yg)("inlineCode",{parentName:"a"},"NO_COLOR"))," environment variable and\nwon't colorize the output when the variable is present."),(0,r.yg)("h3",m({},{id:"--m--monochrome-output-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--M|--monochrome-output")," (Printer)"),(0,r.yg)("p",null,"Disables colored output."),(0,r.yg)("p",null,"This is currently the default. In the future, we will perform TTY detection and\ncolorize the output when write to stdout. Use this option today if you want to\navoid an implicit upgrade to colors in the future."),(0,r.yg)("h3",m({},{id:"--omit-nulls-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--omit-nulls")," (Printer)"),(0,r.yg)("p",null,"Strips ",(0,r.yg)("inlineCode",{parentName:"p"},"null")," fields from the output."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{className:"language-json"}),'{\n  "a": null,\n  "b": [42, null, 43],\n  "c": {\n    "d": null,\n    "e": 42\n  }\n}\n')),(0,r.yg)("p",null,"With ",(0,r.yg)("inlineCode",{parentName:"p"},"--omit-nulls"),", this example becomes:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{className:"language-json"}),'{\n  "b": [42, 43],\n  "c": {\n    "e": 42\n  }\n}\n')),(0,r.yg)("h3",m({},{id:"--omit-empty-objects-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--omit-empty-objects")," (Printer)"),(0,r.yg)("p",null,"Strips empty objects from the output."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{className:"language-json"}),'{\n  "w": null,\n  "x": {},\n  "y": {\n    "z": {}\n  }\n}\n')),(0,r.yg)("p",null,"With ",(0,r.yg)("inlineCode",{parentName:"p"},"--omit-empty-objects"),", this example becomes:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{className:"language-json"}),'{\n  "w": 42,\n}\n')),(0,r.yg)("h3",m({},{id:"--omit-empty-lists-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--omit-empty-lists")," (Printer)"),(0,r.yg)("p",null,"Strips empty lists from the output."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{className:"language-json"}),'{\n  "m": [],\n  "n": {},\n  "o": {\n    "p": []\n  }\n}\n')),(0,r.yg)("p",null,"With ",(0,r.yg)("inlineCode",{parentName:"p"},"--omit-empty-lists"),", this example becomes:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{className:"language-json"}),'{\n  "m": {},\n  "o": {}\n}\n')),(0,r.yg)("h3",m({},{id:"--omit-empty-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--omit-empty")," (Printer)"),(0,r.yg)("p",null,"This options combines all other ",(0,r.yg)("inlineCode",{parentName:"p"},"--omit-*")," options."),(0,r.yg)("h3",m({},{id:"--arrays-of-objects-printer"}),(0,r.yg)("inlineCode",{parentName:"h3"},"--arrays-of-objects")," (Printer)"),(0,r.yg)("p",null,"Prints one array of objects per batch of events arriving at the printer as\nopposed to printing one object per event."),(0,r.yg)("p",null,"This is particularly useful when interfacing with REST APIs, which often require\nsets of events grouped into one JSON object."),(0,r.yg)("p",null,"Use the ",(0,r.yg)("a",m({parentName:"p"},{href:"/next/operators/batch"}),(0,r.yg)("inlineCode",{parentName:"a"},"batch"))," operator to explicitly control how many\nevents get grouped together in the same array."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),'{\n  "foo": 1\n}\n{\n  "foo": 2\n}\n')),(0,r.yg)("p",null,"With ",(0,r.yg)("inlineCode",{parentName:"p"},"--arrays-of-objects"),", this example becomes:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),'[{\n  "foo": 1\n},\n{\n  "foo": 2\n}]\n')),(0,r.yg)("h2",m({},{id:"examples"}),"Examples"),(0,r.yg)("p",null,"Read JSON from stdin, either NDJSON or tree-structured:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),"read json\n")),(0,r.yg)("p",null,"Write JSON without empty fields to a file:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),"to file /tmp/result.json write json --omit-empty\n")),(0,r.yg)("p",null,"Print NDJSON to stdout:"),(0,r.yg)("pre",null,(0,r.yg)("code",m({parentName:"pre"},{}),"write json -c\n")))}j.isMDXComponent=!0}}]);